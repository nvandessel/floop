{"id":"c-1770570585979824699","timestamp":"2026-02-08T09:09:45.979824699-08:00","context":{"timestamp":"2026-02-08T09:09:45.97536622-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"main","project_type":"go","user":"nvandessel","environment":"development"},"agent_action":"Committed beads sync/housekeeping changes directly to main and pushed, following the plan without questioning it. Three commits went straight to main without a PR.","human_response":"","corrected_action":"Even for beads state sync and chore commits, create a feature branch and PR. The rule 'never merge directly to main' applies to ALL commits, not just code changes. Push back on plans that specify direct-to-main commits.","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-08T09:09:46.049537861-08:00"}
{"id":"c-1770571253349938614","timestamp":"2026-02-08T09:20:53.349938614-08:00","context":{"timestamp":"2026-02-08T09:20:53.344153291-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"main","project_type":"go","user":"nvandessel","environment":"development"},"agent_action":"Merged PRs immediately after creation without waiting for user review. The plan said 'Merge both PRs (after review)' but I ran gh pr merge right away, skipping the review step.","human_response":"","corrected_action":"After creating PRs, always pause and present them to the user for review before merging. Say 'PRs are ready for your review' and wait for explicit approval to merge. Never merge PRs autonomously — merging is a user-authorized action.","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-08T09:20:53.433963907-08:00"}
{"id":"c-1770862037019587237","timestamp":"2026-02-11T18:07:17.019587237-08:00","context":{"timestamp":"2026-02-11T18:07:17.014326857-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"feature/graph-view","project_type":"go","file_path":"internal/visualization/dot.go","file_language":"go","file_ext":".go","task":"development","user":"nvandessel","environment":"development"},"agent_action":"Used template.HTML for JSON data inside an html/template  block, which caused the template engine to JS-escape the value (wrapping in quotes and escaping inner quotes), turning the JSON object into a string literal","human_response":"","corrected_action":"Use template.JS (not template.HTML) for data injected into  blocks in html/template. template.HTML only asserts HTML safety — in JS contexts the engine still JS-escapes it. template.JS asserts JS safety and prevents double-encoding. Combine with json.HTMLEscape for XSS prevention (converts \u003c \u003e \u0026 to unicode escapes, preventing  breakout)","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-11T18:07:17.0934008-08:00"}
{"id":"c-1770862232174665584","timestamp":"2026-02-11T18:10:32.174665584-08:00","context":{"timestamp":"2026-02-11T18:10:32.169881678-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"feature/graph-view","project_type":"go","file_path":"internal/visualization/dot.go","file_language":"go","file_ext":".go","task":"development","user":"nvandessel","environment":"development"},"agent_action":"Used template.HTML for injecting JSON into a script block in html/template. html/template applies JS-encoding on template.HTML values inside script contexts, turning JSON objects into quoted strings.","human_response":"","corrected_action":"Use template.JS for values injected into script blocks. Pre-sanitize with json.HTMLEscape to prevent script breakout XSS. template.HTML is only trusted for HTML contexts, not JS contexts in html/template.","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-11T18:10:32.245897276-08:00"}
{"id":"c-1770879274977158579","timestamp":"2026-02-11T22:54:34.977158579-08:00","context":{"timestamp":"2026-02-11T22:54:34.972016718-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"feature/graph-view","project_type":"go","task":"development","user":"nvandessel","environment":"development"},"agent_action":"When stashing before rebase, didn't account for .floop data files causing stash pop conflicts. Also spent time resolving conflicts that were already in main.","human_response":"","corrected_action":"When feature branches have commits that were already cherry-picked or merged to main, consider using `git rebase --skip` for commits marked as \"patch contents already upstream\". For .floop data files, prefer `git checkout --theirs` on stash pop conflicts since the stash has the latest local state.","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-11T22:54:35.147289698-08:00"}
{"id":"c-1770879519409346793","timestamp":"2026-02-11T22:58:39.409346793-08:00","context":{"timestamp":"2026-02-11T22:58:39.40369598-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"feature/graph-view","project_type":"go","file_path":"internal/visualization/templates/graph.html.tmpl","file_ext":".tmpl","task":"development","user":"nvandessel","environment":"development"},"agent_action":"Set cooldownTicks(500) on force-graph, which permanently kills the d3 simulation after 500 ticks. The internal tick counter never resets on drag — only on graphData() calls. This causes all drag interactions (node and canvas) to break after the initial simulation settles.","human_response":"","corrected_action":"Never set cooldownTicks to a finite value on force-graph — use cooldownTime(Infinity) and let the simulation cool down naturally via d3AlphaDecay. Also add onNodeDragEnd to release pinned nodes (fx/fy = undefined) so they rejoin the simulation after being dragged.","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-11T22:58:39.705283924-08:00"}
{"id":"c-1771536375187080601","timestamp":"2026-02-19T13:26:15.187080601-08:00","context":{"timestamp":"2026-02-19T13:26:15.181733795-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"feature/electric-graph","project_type":"go","file_path":"internal/visualization/templates/graph.html.tmpl","file_ext":".tmpl","task":"development","user":"nvandessel","environment":"development"},"agent_action":"Announced visual features (sparks, animations) as complete after only reasoning about the code, without actually confirming visually that the rendering works. Told the user the sparks were there based on code analysis alone.","human_response":"","corrected_action":"For ANY visual/rendering changes: create a visual test (puppeteer script, screenshot capture, or at minimum a debug console.log confirming the code path executes) BEFORE announcing the feature works. Never claim visual features are working based solely on code reasoning — canvas rendering has too many subtle failure modes (coordinate transforms, draw order, API version quirks, state leaks).","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-19T13:26:15.287444732-08:00"}
{"id":"c-1771539574522859165","timestamp":"2026-02-19T14:19:34.522859165-08:00","context":{"timestamp":"2026-02-19T14:19:34.51723349-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"feature/electric-graph","project_type":"go","file_path":"internal/visualization/templates/graph.html.tmpl","file_language":"javascript","file_ext":".tmpl","user":"nvandessel","environment":"development"},"agent_action":"Used linkCanvasObject API in force-graph v1.51.1 for custom link rendering. Despite the API existing as a getter/setter, the callback is NEVER invoked during rendering - 0 calls across all frames. Spent significant debugging time before discovering this.","human_response":"","corrected_action":"Use onRenderFramePost(ctx, globalScale) for custom edge rendering in force-graph. It fires every frame (60fps), provides the canvas context in graph coordinate space, and actually works. Iterate graph.graphData().links manually inside the callback. linkDirectionalParticles also works for simpler particle effects.","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-19T14:19:34.61680466-08:00"}
{"id":"c-1771540059207750210","timestamp":"2026-02-19T14:27:39.20775021-08:00","context":{"timestamp":"2026-02-19T14:27:39.203292646-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"feature/electric-graph","project_type":"go","task":"development","user":"nvandessel","environment":"development"},"agent_action":"When debugging visual rendering issues, made assumptions about what was wrong (threshold too high, spark code buggy) and iterated blindly on code changes without verifying the rendering pipeline was even executing. Wasted multiple rounds of changes before adding diagnostic instrumentation.","human_response":"","corrected_action":"When visual rendering doesn't appear: first verify the rendering callback is actually being CALLED (add a counter/console.log at the very first line). Then verify coordinates are correct (draw an obvious debug marker like a big red circle). Only then debug the rendering logic itself. Work from the pipeline inward: callback fires → coordinates correct → drawing visible → styling correct.","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-19T14:27:39.282810681-08:00"}
{"id":"c-1771540063197257993","timestamp":"2026-02-19T14:27:43.197257993-08:00","context":{"timestamp":"2026-02-19T14:27:43.192343031-08:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"feature/electric-graph","project_type":"go","task":"testing","user":"nvandessel","environment":"development"},"agent_action":"Test scripts spawned browser instances and HTTP servers but didn't reliably clean them up, leaving orphaned tabs and processes on the user's machine. Used `head` to truncate test output which killed the process before cleanup ran.","human_response":"","corrected_action":"Always add process cleanup handlers: process.on('exit'), process.on('SIGINT'), process.on('SIGTERM'), process.on('uncaughtException'). Use SIGKILL for spawned servers in cleanup. Never pipe test output through head/tail which can kill the process before finally blocks run. The user's machine resources matter.","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-19T14:27:43.315771633-08:00"}
{"id":"c-1771600943436694541","timestamp":"2026-02-20T08:22:23.436694541-07:00","context":{"timestamp":"2026-02-20T08:22:23.429935233-07:00","repo":"git@github.com:nvandessel/feedback-loop.git","repo_root":".","branch":"feat/playwright-test-suite","project_type":"go","file_path":"cmd/floop/cmd_derive_edges.go","file_language":"go","file_ext":".go","task":"development","user":"nvandessel","environment":"development"},"agent_action":"Similar-to edge skip logic in deriveEdgesForStore only checks one direction (a.ID:b.ID:similar-to) for existing edges, but behavior order from QueryNodes is non-deterministic. When behaviors load in reversed order, the generated key doesn't match the stored edge, causing SkippedExisting to be 0 and TestDeriveEdgesSkipsExisting to fail.","human_response":"","corrected_action":"For bidirectional edge types like similar-to, the existing-edge check must normalize key order (e.g., sort IDs lexicographically) or check both directions. The root cause is in cmd/floop/cmd_derive_edges.go line 227 — similarToKey should use a canonical ordering like min(a.ID,b.ID):max(a.ID,b.ID):similar-to. The test TestDeriveEdgesSkipsExisting is flaky due to this bug.","conversation_id":"","turn_number":0,"corrector":"mcp-client","processed":true,"processed_at":"2026-02-20T08:22:23.555580131-07:00"}
